---
layout: post
title:  Ruckus Virtual SmartZone Integration
date:   2015-08-03
categories: tutorials
keywords: Ruckus, Ruckus Virtual SmartZone, Captive Portal, Zone Director, Splash Pages, 
---

###Getting the Cucumber Dashboard working with your Ruckus Virtual SmartZone

The Ruckus Virtual SmartZone is a really fantastic piece of kit. This walk-through demonstrates how to integrate it with our splash pages, view your Ruckus wireless clients and, even view the status of your Ruckus APs!

Manage all your networks from a single dashboard - your Unifi, TP-Link, Netgear, OpenWRT and Ruckus devices in a single location.

The whole set-up takes about half an hour - the Ruckus VSG can be a little tricky to get working first time round.

<hr>

###Things you need:

+ Publicly available Ruckus VSG (trial ok)
+ Compatible Ruckus AP
+ Cucumber account

##Open Your Firewall Ports

You must have a public facing VSG with the following ports open:

+ 9443 & 7443 for the VSZ integration
+ 8090, 8099, 8100, 8111, 9997, 9998 to ensure the splash pages work

##Add your Access Points to your Cucumber dashboard

You'll need to add each one. Once you've done this, you will need to make a note of some credentials which are needed when your set up your VSG.

Make sure you create a splash page too. And, if you're setting up zones, please ensure the boxes are all added to the correct zone. There's documentation about doing this in the green sidebar within your dash.

###Get your Nas ID

Firstly change the box type to Ruckus on the settings page. Click the advanced settings link to reveal your unique NasID. This is unique to your account. <b>You must use the same NAS id for all your locations.</b>

<div class="text-center">
  <img src="/images/community/tutorials/settings-1.png" width="800px">
</div>

<div class="text-center">
  <img src="/images/community/tutorials/settings-2.png" width="800px">
</div>

###Radius secret

Click <b>Radius Settings</b> on the home page for your box.

<div class="text-center">
  <img src="/images/community/tutorials/ruckus-radius-1.png" width="800px">
</div>

###Next, get your Ruckus VSG setup.
Login to your VSG and create a zone if you don't have one. You don't have to create a new one.

###Accounting and Authentication Radius Servers

Configuration > Service and Profiles > Authentication

Create a new server and fill in the following fields. You will need the information you just found in Cucumber.

+ IP Address: 146.148.7.43
+ Port: 1812
+ Secret: enter your secret

<div class="text-center">
  <img src="/images/community/tutorials/auth.png" width="800px">
</div>

Next create your accounting server with the same details as above but replace the port with 1813.

<div class="text-center">
  <img src="/images/community/tutorials/accounting.png" width="800px">
</div>

###Create a Hotspot

Configuration > AP Zones > Your Zone > Hotspot WISPr > Create New

You can either use our default url <b>app.my-wifi.co</b> or you can use your own brand. For example, if your brand name is Tony Time, the url will be tony-time.my-wifi.co. You can find this in your branding settings within your Cucumber dashboard.

<div class="text-center">
  <img src="/images/community/tutorials/hotspot-wispr.png" width="800px">
</div>

Before you save, you need to add some walled gardens. Enter the following.

+ &#42;.my-wifi.co
+ &#42;.polkaspots.com
+ &#42;.wirelessisp.co
+ &#42;.ctapp.io
+ &#42;.cucumberwifi.io
+ d3e9l1phmgx8f2.cloudfront.net
+ d247kqobagyqjh.cloudfront.net

If you're using Social logins, you will also need these:

+ connect.facebook.net
+ &#42;.facebook.com
+ &#42;.fbcdn.net
+ &#42;.akamaihd.net
+ &#42;.accounts.google.com
+ &#42;.googleapis.com
+ &#42;.googleusercontent.com
+ &#42;.gstatic.com

<div class="text-center">
  <img src="/images/community/tutorials/walledgardens.png" width="800px">
</div>

###Update your WLAN

Click WLAN in the left-hand menu. Create a new WLAN or edit an existing one.

+ Authentication: Hotspot WISPr
+ NAS ID: Enter the one from your Cucumber dashboard

Enter the accounting and authentication servers you created just now. You must select "Use the controller as a proxy"


<div class="text-center">
  <img src="/images/community/tutorials/wlan-1.png" width="800px">
</div>

###Northbound API

You need to change the password for your northbound API.

Click Configuration > System > Northbound Portal Interface. Enter your password.

<div class="text-center">
  <img src="/images/community/tutorials/ruckus-northbound-api-1.png" width="800px">
</div>

###Create an Admin Account

We'll use this to communicate with your Ruckus VSG and provide a list of online wireless clients and the status of your access points. You can use your normal credentials however we recommend creating a second role, just for the API access.

Click configuration > Administrators. Click create a new Admin account and fill in your details.

<div class="text-center">
  <img src="/images/community/tutorials/ruckus-new-admin.png" width="800px">
</div>

Next, you should create a new role for the user. We'd recommend the following as a minimum.

<div class="text-center">
  <img src="/images/community/tutorials/ruckus-permissions.png" width="800px">
</div>

Assign the user to a role. Click on Configuration > Management Domains. Then click the Add Account and Assign Role button. You will need to choose the user you just created and assign to the role for the API.

<div class="text-center">
  <img src="/images/community/tutorials/ruck-admin-domains.png" width="800px">
</div>

###Add your credentials to your Cucumber WiFi dashboard

Go back to your Cucumber dashboard. In your Location settings, scroll down until you see the Ruckus VSG section.

Enter your VSH public IP or hostname and also your Northbound API password. You should also add your admin user and password. After you click save, we'll run a test on your server.

<b>Please ensure you use https for security reasons.</b>

<div class="text-center">
  <img src="/images/community/tutorials/ruckus-northbound-api.png" width="800px">
</div>

<p>Your VSG must be accessible from the internet. Please do not enter a port number. If all went well, you will see a confirmation message on the page.</p>

<div class="text-center">
  <img src="/images/community/tutorials/ruckus-api-success.png" width="800px">
</div>

###Create a splash page for your Ruckus Gateway

Still in your Cucumber dashboard, click on Splash Pages and then hit create new. Fill in a few details, choose from a number of access types including Social logins, click through and email capture.

###Test Your Splash Pages

Connect to your Ruckus Wi-Fi network and navigate to a website. Watch out for https sites - sometimes they don't redirect correctly.

<div class="text-center">
  <img src="https://d3e9l1phmgx8f2.cloudfront.net/images/www/phone-1.png" width="300px">
</div>

###Verify you can see your clients and access points

Now you've added your API credentials, you can check the status of your access points and clients.

To view your clients, click on Clients in the left-hand menu. Your Ruckus clients are identified by the Dog Icon on the right hand side. You can see all your different clients online in the same place!

<div class="text-center">
  <img src="/images/community/tutorials/ruckus-clients-list.png" width="800px">
</div>

Your boxes will appear in your Boxes list and you can see their current status, IP information and more.

<div class="text-center">
  <img src="/images/community/tutorials/ruckus-access-point-status.png" width="800px">
</div>

<div class="text-center">
  <img src="/images/community/tutorials/ruckus-access-point-status-1.png" width="800px">
</div>

###ALL DONE

That's all you need to do! We hope you enjoyed the tutorial. If you need some help, please get in touch! You can chat to us using the support widget within your Dashboard.

###Troubleshooting

<b>Why captive portal redirection is not working in vSCG?</b>

The wireless clients were able to get an IP address, however they are not able to get the redirection page when they open the web browser.

Solution: Add the ports required at the top of this document have been added to your firewall.

For more information, visit the Ruckus support pages <a href="https://support.ruckuswireless.com/answers/000003379">here</a>.

<br><br>
<div class="text-center">
<p>Sign-up for a Cucumber dashboard. It's free for unlimited access points!</p>
<a href="https://my.ctapp.io/#/create" class="button large success">Join</a>
</div>
<br><br>
<br><br>
<br><br>
